{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://pathways-library.rmi.org/schema/common/markdown.v1.json",
  "title": "Markdown Object",
  "description": "Line-oriented Markdown. Each array element is one Markdown line. Use \"\" for a blank line. Renderer will collapse consecutive blanks and ensure one blank line after ATX headers.",
  "type": "array",
  "minItems": 1,
  "maxItems": 1000,
  "items": {
    "anyOf": [
      {
        "description": "Plain text line: up to 3 leading spaces, forbid tabs/newlines, no trailing space, must contain non-space",
        "type": "string",
        "allOf": [
          { "pattern": "^[^\\t\\r\\n]*$" },
          { "pattern": "^(?: {0,3})\\S.*\\S$" }
        ],
        "maxLength": 600
      },
      { "description": "Blank line", "type": "string", "const": "" },
      {
        "description": "ATX headers: up to 3 leading spaces, 1-6 '#', a space, text; no trailing space",
        "type": "string",
        "pattern": "^(?: {0,3})#{1,6} [^\\s#][^\\t\\r\\n]*[^\\s]$"
      },
      {
        "description": "Unordered list items: -, *, + marker; require at least one non-space char after",
        "type": "string",
        "pattern": "^(?: {0,3})[-*+] +\\S[^\\t\\r\\n]*\\S$"
      },
      {
        "description": "Ordered list items: 1â€“3 digits then '.' and a space; at least one non-space char after",
        "type": "string",
        "pattern": "^(?: {0,3})\\d{1,3}\\. +\\S[^\\t\\r\\n]*\\S$"
      }
    ]
  }
}
